<% include admin-partials/admin_head.ejs %>
<% include admin-partials/headerAdmin.ejs %>
<main role="main">
	<% include admin-partials/navAdmin.ejs %>
	<section>
		<form class="deleteForm">
			<input type="hidden" name="id" value="<%= results.id %>">
			<p>Are you sure you want to delete this item?:</p>
			<table>
				<tr>
					<th>ID</th>
					<th>Menu Name</th>
					<th>Web Link</th>
					<th>Position</th>
				</tr>
				<tr>
					<td>
						<%= results.id %>
					</td>
					<td>
						<%= results.name %>
					</td>
					<td>
						<%= results.link %>
					</td>
					<td>
						<%= results.position %>
					</td>
				</tr>
			</table>
			<button type="submit">Delete</button>
		</form>
	</section>
</main>
<script>
	const form = document.querySelector('.deleteForm');
	form.addEventListener('submit', function (event) {
		event.preventDefault();
		fetch(`http://localhost:3000/admin/menu/delete/${this.id.value}`, {
				method: 'DELETE'
			})
			.then(response => {
				if (response.status === 200) {
					window.location.href = '/admin/menus';
				}
			});
	});
</script>
</body>

</html>