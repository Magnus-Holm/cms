<% include admin-partials/admin_head.ejs %>
<% include admin-partials/headerAdmin.ejs %>
<main role="main">
	<% include admin-partials/navAdmin.ejs %>
	<section>
		<form class="patchForm">
			<input type="hidden" name="id" value="<%= result.id %>">

			<label for="title">Page title</label>
			<input type="text" id="title" name="title" value="<%= result.title %>">

			<label for="content">Page text content</label>
			<input type="text" id="content" name="content" value="<%= result.content %>">

			<button type="submit">Update</button>
		</form>
	</section>
</main>
<script>
	const form = document.querySelector('.patchForm');
	form.addEventListener('submit', function (event) {
		event.preventDefault();
		fetch(`/admin/ring/edit/${this.id.value}`, {
				method: 'PATCH',
				body: JSON.stringify({
					name: form.name.value,
					effect: form.effect.value
				})
			})
			.then(response => {
				if (response.status === 200) {
					window.location.href = '/admin/rings';
				}
			});
	});
</script>
</body>

</html>