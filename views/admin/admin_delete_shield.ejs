<% include admin-partials/admin_head.ejs %>
<% include admin-partials/headerAdmin.ejs %>
<main role="main">
	<% include admin-partials/navAdmin.ejs %>
	<section>
		<form class="deleteForm">
			<input type="hidden" name="id" value="<%= results.id %>">
			<p>Are you sure you want to delete this item?:</p>
			<table>
				<tr>
					<th>ID</th>
					<th>Picture</th>
					<th>Name</th>
					<th>Damage</th>
					<th>AUX effect</th>
					<th>Critical</th>
					<th>Damage Reduction</th>
					<th>Durability</th>
					<th>Stability</th>
					<th>Weight</th>
					<th>Stat requirements</th>
					<th>Stat Scaling</th>
					<th>Type</th>
					<th>Notes</th>
				</tr>
				<tr>
					<td>
						<%= results.id %>
					</td>
					<td>
						<img class="itemImg" src="../images/<%= results.picture %>" alt="">
					</td>
					<td>
						<%= results.name %>
					</td>
					<td>
						<%= results.damage %>
					</td>
					<td>
						<% if (!results.aux_effect){%>
						-
						<%} else{%>
						<%= results.aux_effect %>
						<%} %>
					</td>
					<td>
						<% if (!results.critical){%>
						-
						<%} else{%>
						<%= results.critical %>
						<%} %>
					</td>
					<td>
						<%= results.damage_reduction %>
					</td>
					<td>
						<%= results.durability %>
					</td>
					<td>
						<%= results.stability %>
					</td>
					<td>
						<%= results.weight %>
					</td>
					<td>
						<%= results.stats_req %>
					</td>
					<td>
						<%= results.stats_scale %>
					</td>
					<td>
						<%= results.shield_size %>
					</td>
					<td>
						<% if (!results.notes){%>
						-
						<%} else{%>
						<%= results.notes %>
						<%} %>
					</td>
				</tr>
			</table>
			<button type="submit">Delete</button>
		</form>
	</section>
</main>
<script>
	const form = document.querySelector('.deleteForm');
	form.addEventListener('submit', function (event) {
		event.preventDefault();
		fetch(`http://localhost:3000/admin/shield/delete/${this.id.value}`, {
				method: 'DELETE'
			})
			.then(response => {
				if (response.status === 200) {
					window.location.href = '/admin/shields';
				}
			});
	});
</script>
</body>

</html>